<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Gestionale Studio â€“ Arch. Aurelio Pezzola</title>

<style>
:root{
  --nero:#111;
  --grigio:#666;
  --bordo:#ddd;
  --fase:#eaeaea;

  --attivo:#c8f0d1;
  --urgente:#f6c1c1;
  --attesa:#f6e7b4;
  --archiviato:#c9daf8;
}

body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
  margin:0;
  background:white;
  color:var(--nero);
}

header{
  padding:24px 32px;
  border-bottom:2px solid var(--nero);
  display:flex;
  justify-content:space-between;
}

nav{
  padding:16px 32px;
  border-bottom:1px solid var(--bordo);
}

nav a{
  margin-right:24px;
  text-decoration:none;
  color:var(--nero);
  font-weight:500;
}

main{ padding:32px; }

.box{
  border:1px solid var(--bordo);
  padding:24px;
}

h3{ margin-top:0; }

#programma{
  display:flex;
  gap:32px;
}

/* LISTA */
#lista-lavori{
  width:35%;
  list-style:none;
  padding:0;
  margin:0;
}

.lavoro{
  border:1px solid var(--bordo);
  padding:12px;
  margin-bottom:8px;
  cursor:pointer;
  background:white;
}

.lavoro strong{ font-weight:700; }

.badge{
  padding:2px 6px;
  margin-left:6px;
  font-size:12px;
  border-radius:4px;
  display:inline-block;
}

.fase{ background:var(--fase); }

.attivo{ background:var(--attivo); }
.urgente{ background:var(--urgente); }
.attesa{ background:var(--attesa); }
.archiviato{ background:var(--archiviato); }

/* SCHEDA */
#scheda{
  width:65%;
  border-left:1px solid var(--bordo);
  padding-left:24px;
}

.campo{ margin-bottom:16px; }

label{
  display:block;
  font-size:12px;
  color:var(--grigio);
  margin-bottom:4px;
}

input,select,textarea{
  width:100%;
  padding:8px;
  border:1px solid #ccc;
  font-family:inherit;
}

/* STAMPA */
@media print{
  nav, #scheda, button{ display:none; }
  #lista-lavori{ width:100%; }
}
</style>
</head>

<body>

<header>
  <div>
    <h1>GESTIONALE STUDIO</h1>
    <h2>Architetto Aurelio Pezzola</h2>
  </div>
  <button onclick="window.print()">ðŸ–¨ Stampa</button>
</header>

<nav>
  <a href="#">Programma Lavori</a>
</nav>

<main>
<div class="box">
<h3>Programma Lavori</h3>

<button onclick="aggiungiLavoro()">ï¼‹ Aggiungi lavoro</button>

<div id="programma">
<ul id="lista-lavori"></ul>
<div id="scheda"><em>Seleziona un lavoro</em></div>
</div>
</div>
</main>

<script>
let progetti=[
{codice:"FRAM-01",titolo:"Nuovo Museo FRAM",fase:"Progettazione Generale",stato:"Attivo",note:""},
{codice:"BRE-02",titolo:"Via Cambrant",fase:"Ricerca - Studio",stato:"In attesa",note:""}
];

const fasi=[
"Progettazione Generale",
"Modellazione",
"Relazione Illustrativa",
"Ricerca - Studio",
"Sopralluogo Cantiere",
"Riunione - Incontro",
"Direzione Lavori - Coordinamento",
"Altro"
];

const stati=["Attivo","Urgente","In attesa","Archiviato"];

function statoClasse(s){
  return s==="Attivo"?"attivo":
         s==="Urgente"?"urgente":
         s==="In attesa"?"attesa":"archiviato";
}

function renderLista(){
  const ul=document.getElementById("lista-lavori");
  ul.innerHTML="";
  progetti.forEach((p,i)=>{
    const li=document.createElement("li");
    li.className="lavoro";
    li.onclick=()=>apriScheda(i);
    li.innerHTML=`
      <strong>${p.codice}</strong> â€“ ${p.titolo}
      <span class="badge fase">${p.fase}</span>
      <span class="badge ${statoClasse(p.stato)}">${p.stato}</span>
    `;
    ul.appendChild(li);
  });
}

function apriScheda(i){
  const p=progetti[i];
  document.getElementById("scheda").innerHTML=`
    <div class="campo">
      <label>Codice</label>
      <input value="${p.codice}" oninput="p.codice=this.value">
    </div>
    <div class="campo">
      <label>Titolo</label>
      <input value="${p.titolo}" oninput="p.titolo=this.value">
    </div>
    <div class="campo">
      <label>Fase</label>
      <select onchange="p.fase=this.value">
        ${fasi.map(f=>`<option ${f===p.fase?"selected":""}>${f}</option>`).join("")}
      </select>
    </div>
    <div class="campo">
      <label>Stato</label>
      <select onchange="p.stato=this.value">
        ${stati.map(s=>`<option ${s===p.stato?"selected":""}>${s}</option>`).join("")}
      </select>
    </div>
    <div class="campo">
      <label>Note</label>
      <textarea rows="2" oninput="p.note=this.value">${p.note}</textarea>
    </div>
    <button onclick="progetti.splice(${i},1);chiudiScheda();renderLista()">ðŸ—‘ Elimina lavoro</button>
  `;
  renderLista();
}

function aggiungiLavoro(){
  progetti.push({codice:"",titolo:"Nuovo lavoro",fase:fasi[0],stato:"Attivo",note:""});
  renderLista();
}

function chiudiScheda(){
  document.getElementById("scheda").innerHTML="<em>Seleziona un lavoro</em>";
}

document.addEventListener("keydown",e=>{
  if(e.key==="Escape") chiudiScheda();
});

renderLista();
</script>

</body>
</html>
